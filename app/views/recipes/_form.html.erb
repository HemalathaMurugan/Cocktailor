<h2>Create a New Recipe:</h2>

<%= form_with model: @recipe do |f|%>
    <label>Drink Name:</label>
    <%= f.text_field :name %><br>
    <br>

    <label>Description:</label>
    <%= f.text_area :description %><br>
    <br><br>
    <label>Ingredients:</label>
    <p>If you consider an ingredient a main ingredient, enter its amount in centiliters. 3 centiliters is equivalent to 1 ounce. Examples of main ingredients are Rum, Whiskey, Vermouth, and Lemon Juice. If your ingredient is not a main ingredient, leave amount blank and describe the amount in the name. For example, "2 dashes of bitters" or "2 fresh mint leaves" or "Salt".</p>
    <ul>
      <%= f.fields_for :ingredients do |ingredient| %>
      <li>
        <%= ingredient.label :name %>
        <% if @recipe.ingredients[0].id == nil || (ingredient.text_field :name).split('=')[2][1..6] == "recipe" %>
          <%= ingredient.text_field :name, list: "ingredient_autocomplete", value: '' %>
        <% else %>
          <%= ingredient.text_field :name, list: "ingredient_autocomplete", value: (ingredient.text_field :name).split('=')[2][1..-7] %>
        <% end %>
        <% byebug %>
        <%= ingredient.label :amount %>
        <%= ingredient.text_field :amount %>
          <datalist id="ingredient_autocomplete">
          <% @ingredients.each do |ingredient|%>
           <option value="<%=ingredient.name%>">
          <%end%>
      </li>
      <% end %>
    </ul>

    <label>Instructions:</label>
    <%= f.text_area :instructions%><br><br>

    <label>Choose the Glass type: </label>
    <%= f.collection_select :glass_type, @glasses, :glass_type, :glass_type %><br><br>

    <label>Choose the Category:</label>
    <%= f.collection_select :category, @categories, :category, :category %><br><br>

    <%= f.submit "Create Recipe"%>

<% end %>
